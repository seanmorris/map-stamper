<div class = "map" cv-attr = "width;height">
	<svg xmlns="http://www.w3.org/2000/svg" width = "[[width]]" height = "[[height]]" cv-ref = "svg">
		<foreignobject x="0" y="0" width = "100%" height = "100%">
			<div class = "map" xmlns="http://www.w3.org/1999/xhtml" style = "--width:[[width]];--height:[[height]];">
				<div class = "map-holder" style = "--map:url([[map]]); --rotation:[[rotation]]; --scale:[[scale]];" cv-on = "drop;dragover;" cv-ref = "map" xmlns="http://www.w3.org/1999/xhtml">
					<div cv-each = "tags:stamp:t" xmlns="http://www.w3.org/1999/xhtml">
						<div class = "map-tag"
							draggable = "true"
							cv-on = "dragstart(event, stamp);"
							style = "--x:[[stamp.x]];--y:[[stamp.y]];--l:[[stamp.l]];--t:[[stamp.t]];--r:[[stamp.r]];--c:[[stamp.c]];" xmlns="http://www.w3.org/1999/xhtml">
							<p xmlns="http://www.w3.org/1999/xhtml">[[stamp.id]]</p>
							<button data-type = "close" xmlns="http://www.w3.org/1999/xhtml" cv-on = "click:delete(event, stamp)"></button>
							<div class = "buttons">
								<button data-type = "rotate-left" xmlns="http://www.w3.org/1999/xhtml" cv-on = "click:rotateLeft(event, stamp)"></button>
								<button data-type = "rotate-right" xmlns="http://www.w3.org/1999/xhtml" cv-on = "click:rotateRight(event, stamp)"></button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</foreignobject>
	</svg>
	<img cv-ref = "image" src = "[[rendered]]">
	<canvas cv-ref = "canvas" width = "[[width]]" height = "[[height]]"></canvas>
</div>

<div class = "map-buttons">
	<div>
		<button cv-on = "click:viewImage">view</button>
		<button cv-on = "click:saveImage">save</button>
	</div>
	<button cv-on = "click:reset">reset</button>
</div>

<div class = "map-controls">
	<label>
		<span>rotation</span>
		<input type = "range" cv-bind = "rotation" min =  "-0.25" max = "0.25" step = "0.001">
		<input type = "number" cv-bind = "rotation" min =  "-0.25" max = "0.25" step = "0.001">
	</label>
	<label>
		<span>scale</span>
		<input type = "range" cv-bind = "scale"    min =  "0" max = "3" step = "0.001">
		<input type = "number" cv-bind = "scale"    min =  "0" max = "3" step = "0.001">
	</label>
</div>
